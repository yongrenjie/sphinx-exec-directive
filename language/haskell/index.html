
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Haskell &#8212; sphinx-exec-directive  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="prev" title="Other languages" href="../" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="haskell">
<h1>Haskell<a class="headerlink" href="#haskell" title="Permalink to this headline">¶</a></h1>
<p>Haskell code can be run with <code class="docutils literal notranslate"><span class="pre">runghc</span></code> or <code class="docutils literal notranslate"><span class="pre">ghci</span></code>.
Alternatively, it is also possible to run a <code class="docutils literal notranslate"><span class="pre">cabal</span></code> or <code class="docutils literal notranslate"><span class="pre">stack</span></code> target and show its output.</p>
<div class="section" id="using-runghc-default">
<h2>Using <code class="docutils literal notranslate"><span class="pre">runghc</span></code> (default)<a class="headerlink" href="#using-runghc-default" title="Permalink to this headline">¶</a></h2>
<p>Using <code class="docutils literal notranslate"><span class="pre">runghc</span></code> requires that the code block defines a module complete with a
<code class="docutils literal notranslate"><span class="pre">main</span></code> function:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">rst</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">exec</span><span class="p">::</span>
   <span class="nc">:process:</span> haskell

   module Main where

   main :: IO ()
   main = do
     let x = fmap (+10) [1..10]
     print x
</pre></div>
</div>
</div>
<p><hr /></p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span><span class="w"> </span><span class="nn">Main</span><span class="w"> </span><span class="kr">where</span>

<span class="nf">main</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">IO</span><span class="w"> </span><span class="nb">()</span>
<span class="nf">main</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">do</span>
<span class="w">  </span><span class="kr">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">fmap</span><span class="w"> </span><span class="p">(</span><span class="o">+</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="p">]</span>
<span class="w">  </span><span class="n">print</span><span class="w"> </span><span class="n">x</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[11,12,13,14,15,16,17,18,19,20]
</pre></div>
</div>
</div>
<div class="section" id="using-ghci">
<h2>Using <code class="docutils literal notranslate"><span class="pre">ghci</span></code><a class="headerlink" href="#using-ghci" title="Permalink to this headline">¶</a></h2>
<p>Using <code class="docutils literal notranslate"><span class="pre">ghci</span></code> requires that <code class="docutils literal notranslate"><span class="pre">ghci</span></code> is on your <code class="docutils literal notranslate"><span class="pre">$PATH</span></code>.
You should use this runner when you want to show some type signatures or run code that is not affiliated with a project.
See the <a class="reference internal" href="#haskell-cabal"><span class="std std-ref">Cabal</span></a> section for running project targets or <code class="docutils literal notranslate"><span class="pre">ghci</span></code> loaded with your project.</p>
<p>Notice the new <code class="docutils literal notranslate"><span class="pre">with</span></code> flag here: this changes the default runner from <code class="docutils literal notranslate"><span class="pre">runghc</span></code> to <code class="docutils literal notranslate"><span class="pre">ghci</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">.ghci</span></code> files are ignored by this runner (this makes results more reproducible).</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">rst</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">exec</span><span class="p">::</span>
   <span class="nc">:process:</span> haskell
   <span class="nc">:with:</span> ghci

   :t &quot;Hello&quot;
</pre></div>
</div>
</div>
<p><hr /></p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kt">:</span><span class="n">t</span><span class="w"> </span><span class="s">&quot;Hello&quot;</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> &quot;Hello&quot; :: String
</pre></div>
</div>
<p>You can also load any packages in the global environment into the <code class="docutils literal notranslate"><span class="pre">ghci</span></code> instance:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">rst</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">exec</span><span class="p">::</span>
   <span class="nc">:process:</span> haskell
   <span class="nc">:with:</span> ghci

   :m + Data.List
   :t span
</pre></div>
</div>
</div>
<p><hr /></p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kt">:</span><span class="n">m</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kt">Data</span><span class="o">.</span><span class="kt">List</span>
<span class="kt">:</span><span class="n">t</span><span class="w"> </span><span class="n">span</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  span :: (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</pre></div>
</div>
</div>
<div class="section" id="running-with-cabal-or-stack">
<span id="haskell-cabal"></span><h2>Running with Cabal or Stack<a class="headerlink" href="#running-with-cabal-or-stack" title="Permalink to this headline">¶</a></h2>
<p>If you have a <code class="docutils literal notranslate"><span class="pre">cabal</span></code> or <code class="docutils literal notranslate"><span class="pre">stack</span></code> project that your documentation builds upon, then you can run any <code class="docutils literal notranslate"><span class="pre">cabal</span></code> or <code class="docutils literal notranslate"><span class="pre">stack</span></code> target and capture its output.
This is particularly useful for showing benchmarks in text.
For example, the <a class="reference external" href="https://github.com/input-output-hk/hs-opt-handbook.github.io">Haskell Optimization Handbook</a> has a <code class="docutils literal notranslate"><span class="pre">cabal</span></code> project whose programs are used to elucidate points made in the handbook.
So, it runs benchmarks in the handbook to show off the effects of different optimisations.
The directive invocation becomes:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">rst</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">exec</span><span class="p">::</span> code/lethargy/bench/TooManyClosures.hs
   <span class="nc">:process:</span> haskell
   <span class="nc">:project_dir:</span> code/lethargy/
   <span class="nc">:with:</span> cabal
   <span class="nc">:args:</span> bench lethargy:tooManyClosures
</pre></div>
</div>
</div>
<p>(The output is shown <a class="reference external" href="https://imgur.com/BMB9gDc">here</a>.)</p>
<p>Notice the invocation takes a source file after <code class="docutils literal notranslate"><span class="pre">exec::</span></code>, and that there are several new flags: <code class="docutils literal notranslate"><span class="pre">project_dir</span></code>, <code class="docutils literal notranslate"><span class="pre">with</span></code>, and <code class="docutils literal notranslate"><span class="pre">args</span></code>.
<code class="docutils literal notranslate"><span class="pre">project_dir</span></code> is a <em>relative</em> filepath that is relative to the root directory of the Sphinx
project (where your <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> is located).
The <code class="docutils literal notranslate"><span class="pre">with</span></code> option sets the runner to use <code class="docutils literal notranslate"><span class="pre">cabal</span></code> in this example; if you’re using <code class="docutils literal notranslate"><span class="pre">stack</span></code> then you can analogously use <code class="docutils literal notranslate"><span class="pre">with:</span> <span class="pre">stack</span> <span class="pre">``.</span>
<span class="pre">Finally,</span> <span class="pre">``args</span></code> are just all the command-line arguments that you want to pass to either <code class="docutils literal notranslate"><span class="pre">cabal</span></code> or <code class="docutils literal notranslate"><span class="pre">stack</span></code>.</p>
<p>The runner code is deliberately simple; it does not try to figure things out for you or hunt for your <code class="docutils literal notranslate"><span class="pre">.cabal</span></code> or <code class="docutils literal notranslate"><span class="pre">.stack</span></code> files.
It simply aggregates the needed information, performs some safety checks, and runs either <code class="docutils literal notranslate"><span class="pre">cabal</span></code> or <code class="docutils literal notranslate"><span class="pre">stack</span></code> with the <code class="docutils literal notranslate"><span class="pre">args</span></code> field.</p>
<p>The source file is shown in its entirety, followed by the output of the <code class="docutils literal notranslate"><span class="pre">cabal</span></code> or <code class="docutils literal notranslate"><span class="pre">stack</span></code> target.
If you do not need to show the entire file, then remove the filepath after the <code class="docutils literal notranslate"><span class="pre">exec::</span></code> call.
Notice that the output from the target only shows the output <em>produced</em> by the target, that is, it elides all output from building the project and its dependencies.
This is purposely filtered and is not exposed to the end-user (that’s you) to disable.
If you need this then please <a class="reference external" href="https://github.com/yongrenjie/sphinx-exec-directive/issues">open an issue</a>!</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../">sphinx-exec-directive</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation/">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basic/">Basic usage: Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../options/">Options</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Other languages</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Haskell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-runghc-default">Using <code class="docutils literal notranslate"><span class="pre">runghc</span></code> (default)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-ghci">Using <code class="docutils literal notranslate"><span class="pre">ghci</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-with-cabal-or-stack">Running with Cabal or Stack</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../">Documentation overview</a><ul>
  <li><a href="../">Other languages</a><ul>
      <li>Previous: <a href="../" title="previous chapter">Other languages</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022–2023, Jonathan Yong.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/language/haskell.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>